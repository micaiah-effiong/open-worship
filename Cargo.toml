[package]
name = "openworship"
description = "Openworship is an opinionated GUI application for farming on Autonomys Network"
license = "MIT"
version = "0.2.11"
authors = ["Micah Effiong <micaiah.effiong@gmail.com>"]
repository = "https://github.com/micaiah-effiong/open-worship"
edition = "2021"
include = [
    "/src",
    "/Cargo.toml",
]

[package.metadata.deb]
section = "net"
assets = [
    ["res/linux/openworship-autostart.desktop", "/etc/xdg/autostart/xyz.autonomys.openworship.desktop", "644"],
    ["target/release/openworship", "/usr/bin/openworship", "755"],
    # Name must match application ID or else it has a strange behavior
    ["res/linux/xyz.autonomys.openworship.desktop", "/usr/share/applications/xyz.autonomys.openworship.desktop", "644"],
    ["res/linux/openworship.png", "/usr/share/icons/hicolor/256x256/apps/openworship.png", "644"],
]

[package.metadata.deb.variants.modern]
name = "openworship"
merge-assets.append = [
    ["target/release/openworship-modern", "/usr/bin/openworship-modern", "755"],
]

[package.metadata.winres]
ProductName = "Openworship"

[package.metadata.wix]
# Custom location to keep the root of the project cleaner
include = ["res/windows/wix/openworship.wxs"]

[dependencies]
relm4 = "0.9.0"
relm4-components = "0.9.0"
# relm4-icons = "0.9.0"
relm4-icons = "0.10.0-beta.2"
dirs = "5.0.1"
rusqlite = { version = "0.34.0", features = ["bundled"] }
serde = { version = "1.0.217", features = ["derive"] }
serde_json = "1.0.138"
reqwest = { version = "0.12.12", features = ["json","stream"] }
futures-util = "0.3.31"

[dependencies.gtk]
features = ["v4_12"]
package = "gtk4"
version = "0.9.0"

[target.'cfg(windows)'.dependencies]
native-dialog = "0.7.0"
tracing-panic = "0.1.2"

[target.'cfg(any(target_os = "macos", target_os = "windows"))'.dependencies]
tray-icon = "0.19.2"

[target.'cfg(all(unix, not(target_os = "macos")))'.dependencies]
ksni = "0.3.0"

[build-dependencies]
relm4-icons-build = "0.10.0-beta.2"
glib-build-tools = "0.20.0"

[target.'cfg(windows)'.build-dependencies]
winres = "0.1.12"

[profile.production]
inherits = "release"
lto = "fat"
